local m={fnext=function(l,n,o,p)if l==nil then return nil end;n=tostring(n)o=tostring(o)p=tostring(p)if l[n]==nil then l[n]={}end;if l[n][o]==nil then l[n][o]={}end;if l[n][o][p]==nil then l[n][o][p]=draw.CreateFont(n,(tonumber(o)),tonumber(p))end;return l[n][o][p]end,rgb2hsb=function(l,n,o,p)if l then l=l/255 else l=0 end;if n then n=n/255 else n=0 end;if o then o=o/255 else o=0 end;if p then p=p/255 else p=0 end;l=math.max(0,math.min(1,l))n=math.max(0,math.min(1,n))o=math.max(0,math.min(1,o))p=math.max(0,math.min(1,p))local q=math.min(l,n,o)local r=math.max(l,n,o)local s=r;local t;if r~=0 then t=(r-q)/r else t=0 end;local u=0;if r~=q then if r==l then u=(n-o)/ (r-q)elseif r==n then u=2+ (o-l)/ (r-q)else u=4+ (l-n)/ (r-q)end end;u=u/6;if u<0 then u=u+1 elseif u>1 then u=u-1 end;return u,t,s,p end,hsb2rgb=function(l,n,o,p)if l then l=l else l=0 end;if n then n=n else n=0 end;if o then o=o else o=0 end;if p then p=p else p=1 end;l=math.max(0,math.min(1,l))n=math.max(0,math.min(1,n))o=math.max(0,math.min(1,o))p=math.max(0,math.min(1,p))local r=l*360;if n==0 then local z=math.floor(o*255+0.5)return z,z,z,math.floor(p*255+0.5)end;local s=math.floor(r/60)local u=(r/60)-s;local v=o* (1-n)local w=o* (1-n*u)local q=o* (1-n* (1-u))local t=0;local x=0;local y=0;if s==0 then t,x,y=o,q,v elseif s==1 then t,x,y=w,o,v elseif s==2 then t,x,y=v,o,q elseif s==3 then t,x,y=v,w,o elseif s==4 then t,x,y=q,v,o else t,x,y=o,v,w end;return(math.floor(t*255+0.5)), (math.floor(x*255+0.5)), (math.floor(y*255+0.5)),math.floor(p*255+0.5)end}local a={BaseBuilder=(function()do local l;local n={parent=function(o,p)o._parent=p;return o end,name=function(o,p)o._name=p;return o end,varname=function(o,p)o._varname=p;return o end,description=function(o,p)o._description=p;return o end,default=function(o,p)o._default=p;return o end,__tostring=function(o)return o._varname..'("'..o._name..'")'end}if n.__index==nil then n.__index=n end;l=setmetatable({__init=function(o)o._parent=nil;o._name=nil;o._varname=nil;o._description=nil;o._default=nil end,__base=n},{__index=n,__call=function(o,...)local p=setmetatable({},n)o.__init(p,...)return p end})n.__class=l;return l end end)()}do local l;local n=a.BaseBuilder;local o={build=function(p)if(p._name==nil or# (p._name:gsub('%s+',''))==0)then error('Name cannot be blank for a checkbox')end;if(p._varname==nil or# (p._varname:gsub('%s+',''))==0)then p._varname=(p._name:gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower())..'.checkbox'end;local q=gui.Checkbox(p._parent,p._varname,p._name,p._default)if not(p._description==nil or# (p._description:gsub('%s+',''))==0)then q:SetDescription(p._description)end;return q end}for p,q in pairs(n.__base)do if o[p]==nil and p:match("^__")and not(p=="__index"and q==n.__base)then o[p]=q end end;if o.__index==nil then o.__index=o end;setmetatable(o,n.__base)l=setmetatable({__init=function(p)p._default=false end,__base=o,__parent=n},{__index=function(p,q)local r=rawget(o,q)if r==nil then local s=rawget(p,"__parent")if s then return s[q]end else return r end end,__call=function(p,...)local q=setmetatable({},o)p.__init(q,...)return q end})o.__class=l;if n.__inherited then n.__inherited(n,l)end;a.CheckBuilder=l end;do local l;local n=a.BaseBuilder;local o={build=function(p)if(p._name==nil or# (p._name:gsub('%s+',''))==0)then error('Name cannot be blank for a color picker')end;if not(p._description==nil or# (p._description:gsub('%s+',''))==0)then error('Description is disallowed for a color picker')end;if(p._default==nil or# (p._default)==0)then error('Default value cannot be empty for a color picker')end;if(p._varname==nil or# (p._varname:gsub('%s+',''))==0)then p._varname=(p._name:gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower())..'.colorpicker'end;return gui.ColorPicker(p._parent,p._varname,p._name,unpack(p._default))end}for p,q in pairs(n.__base)do if o[p]==nil and p:match("^__")and not(p=="__index"and q==n.__base)then o[p]=q end end;if o.__index==nil then o.__index=o end;setmetatable(o,n.__base)l=setmetatable({__init=function(p,...)return l.__parent.__init(p,...)end,__base=o,__parent=n},{__index=function(p,q)local r=rawget(o,q)if r==nil then local s=rawget(p,"__parent")if s then return s[q]end else return r end end,__call=function(p,...)local q=setmetatable({},o)p.__init(q,...)return q end})o.__class=l;if n.__inherited then n.__inherited(n,l)end;a.ColorBuilder=l end;do local l;local n=a.BaseBuilder;local o={build=function(p)if(p._name==nil or# (p._name:gsub('%s+',''))==0)then error('Name cannot be blank for an editbox')end;if(p._varname==nil or# (p._varname:gsub('%s+',''))==0)then p._varname=(p._name:gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower())..'.editbox'end;local q=gui.Editbox(p._parent,p._varname,p._name)if not(p._description==nil or# (p._description:gsub('%s+',''))==0)then q:SetDescription(p._description)end;return q end}for p,q in pairs(n.__base)do if o[p]==nil and p:match("^__")and not(p=="__index"and q==n.__base)then o[p]=q end end;if o.__index==nil then o.__index=o end;setmetatable(o,n.__base)l=setmetatable({__init=function(p,...)return l.__parent.__init(p,...)end,__base=o,__parent=n},{__index=function(p,q)local r=rawget(o,q)if r==nil then local s=rawget(p,"__parent")if s then return s[q]end else return r end end,__call=function(p,...)local q=setmetatable({},o)p.__init(q,...)return q end})o.__class=l;if n.__inherited then n.__inherited(n,l)end;a.EditBuilder=l end;do local l;local n=a.BaseBuilder;local o={build=function(p)if(p._name==nil or# (p._name:gsub('%s+',''))==0)then error('Name cannot be blank for a combobox')end;if(p._default==nil or# (p._default)==0)then error('Default value cannot be empty for a combobox')end;if(p._varname==nil or# (p._varname:gsub('%s+',''))==0)then p._varname=(p._name:gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower())..'.combobox'end;local q=gui.Combobox(p._parent,p._varname,p._name,unpack(p._default))if not(p._description==nil or# (p._description:gsub('%s+',''))==0)then q:SetDescription(p._description)end;return q end}for p,q in pairs(n.__base)do if o[p]==nil and p:match("^__")and not(p=="__index"and q==n.__base)then o[p]=q end end;if o.__index==nil then o.__index=o end;setmetatable(o,n.__base)l=setmetatable({__init=function(p,...)return l.__parent.__init(p,...)end,__base=o,__parent=n},{__index=function(p,q)local r=rawget(o,q)if r==nil then local s=rawget(p,"__parent")if s then return s[q]end else return r end end,__call=function(p,...)local q=setmetatable({},o)p.__init(q,...)return q end})o.__class=l;if n.__inherited then n.__inherited(n,l)end;a.ComboBuilder=l end;do local l;local n=a.BaseBuilder;local o={min=function(p,q)p._min=q;return p end,max=function(p,q)p._max=q;return p end,step=function(p,q)p._step=q;return p end,build=function(p)if(p._name==nil or# (p._name:gsub('%s+',''))==0)then error('Name cannot be blank for a slider')end;if p._default==nil then error('Default value cannot be nil for a slider')end;if p._min==nil then error('Minimum value cannot be nil for a slider')end;if p._max==nil then error('Maximum value cannot be nil for a slider')end;if p._step==nil then error('Step cannot be nil for a slider')end;if p._min>=p._max then error('Minimum value should be less than the maximum value for a slider')end;if(p._varname==nil or# (p._varname:gsub('%s+',''))==0)then p._varname=(p._name:gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower())..'.slider'end;local q=gui.Slider(p._parent,p._varname,p._name,p._default,p._min,p._max,p._step)if not(p._description==nil or# (p._description:gsub('%s+',''))==0)then q:SetDescription(p._description)end;return q end}for p,q in pairs(n.__base)do if o[p]==nil and p:match("^__")and not(p=="__index"and q==n.__base)then o[p]=q end end;if o.__index==nil then o.__index=o end;setmetatable(o,n.__base)l=setmetatable({__init=function(p)p._min=nil;p._max=nil;p._step=nil end,__base=o,__parent=n},{__index=function(p,q)local r=rawget(o,q)if r==nil then local s=rawget(p,"__parent")if s then return s[q]end else return r end end,__call=function(p,...)local q=setmetatable({},o)p.__init(q,...)return q end})o.__class=l;if n.__inherited then n.__inherited(n,l)end;a.SliderBuiler=l end;do local l;local n=a.BaseBuilder;local o={build=function(p)if p._parent==nil then error('Parent cannot be nil for a tab')end;if(p._name==nil or# (p._name:gsub('%s+',''))==0)then error('Name cannot be blank for a tab')end;if(p._varname==nil or# (p._varname:gsub('%s+',''))==0)then p._varname=((tostring(p._parent))..' '..p._name):gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower()end;return gui.Tab(p._parent,p._varname,p._name)end}for p,q in pairs(n.__base)do if o[p]==nil and p:match("^__")and not(p=="__index"and q==n.__base)then o[p]=q end end;if o.__index==nil then o.__index=o end;setmetatable(o,n.__base)l=setmetatable({__init=function(p,...)return l.__parent.__init(p,...)end,__base=o,__parent=n},{__index=function(p,q)local r=rawget(o,q)if r==nil then local s=rawget(p,"__parent")if s then return s[q]end else return r end end,__call=function(p,...)local q=setmetatable({},o)p.__init(q,...)return q end})o.__class=l;if n.__inherited then n.__inherited(n,l)end;a.TabBuilder=l end;local b={menu=gui.Reference('Menu'),settings=gui.Reference('Settings')}local c={movement=a.TabBuilder():parent(b.settings):name('Movement'):build()}local d={font={keys={'Consolas','AcPlus IBM BIOS'},vals={},size=20,weight=900},shadow={offset={x=1,y=1}},color={debug={0,255,0,255},shadow={0,0,0,255},saturation=1,brightness=1}}local e={global_font_check=a.CheckBuilder():parent(c.movement):name('Global Font'):description('Render any supported text using the global font.'):default(true):build(),global_font_name_combo=a.ComboBuilder():parent(c.movement):name('Global Font Name'):description('Set the global font name used to render any text.'):default(d.font.keys):build(),global_font_size_slider=a.SliderBuiler():parent(c.movement):name('Global Font Size'):description('Set the global font size used to render any text.'):default(d.font.size):min(1):max(64):step(1):build(),global_font_weight_slider=a.SliderBuiler():parent(c.movement):name('Global Font Weight'):description('Set the global font weight used to render any text.'):default(d.font.weight):min(100):max(900):step(100):build(),global_shadow_check=a.CheckBuilder():parent(c.movement):name('Global Shadow'):description('Render shadows of all elements that are supported. '):default(true):build(),global_shadow_offset_x_slider=a.SliderBuiler():parent(c.movement):name('Global Shadow Offset X-Axis'):description('Set the global shadow offset on the x-axis.'):default(d.shadow.offset.x):min(-2):max(2):step(1):build(),global_shadow_offset_y_slider=a.SliderBuiler():parent(c.movement):name('Global Shadow Offset Y-Axis'):description('Set the global shadow offset on the y-axis.'):default(d.shadow.offset.y):min(-2):max(2):step(1):build(),global_shadow_color=a.ColorBuilder():parent(c.movement):name('Global Shadow Color'):default(d.color.shadow):build(),global_shadow_saturation_slider=a.SliderBuiler():parent(c.movement):name('Global Shadow Color Saturation'):description('Set the global shadow color saturation.'):default(d.color.saturation):min(0):max(1):step(0.01):build(),global_shadow_brightness_slider=a.SliderBuiler():parent(c.movement):name('Global Shadow Color Brightness'):description('Set the global shadow color brightness.'):default(d.color.brightness):min(0):max(1):step(0.01):build(),debug_check=a.CheckBuilder():parent(c.movement):name('Debug'):description('Show debug text on the screen.'):build(),debug_spectators_check=a.CheckBuilder():parent(c.movement):name('Debug Spectators'):description('Show the list of spectators in the top-left corner of the screen.'):build(),debug_spectators_bot_check=a.CheckBuilder():parent(c.movement):name('Debug Spectators Bot'):description('Switch to show or hide bots from the list of spectators.'):build(),debug_spectators_self_check=a.CheckBuilder():parent(c.movement):name('Debug Spectators Self'):description('Switch to show or hide yourself from the list of spectators.'):build(),debug_color=a.ColorBuilder():parent(c.movement):name('Debug Color'):default(d.color.debug):build(),debug_saturation_slider=a.SliderBuiler():parent(c.movement):name('Debug Color Saturation'):description('Set the debug color saturation.'):default(d.color.saturation):min(0):max(1):step(0.01):build(),debug_brightness_slider=a.SliderBuiler():parent(c.movement):name('Debug Color Brightness'):description('Set the debug color brightness.'):default(d.color.brightness):min(0):max(1):step(0.01):build(),debug_font_check=a.CheckBuilder():parent(c.movement):name('Debug Font'):description('Override the global font parameters.'):build(),debug_font_name_combo=a.ComboBuilder():parent(c.movement):name('Debug Font Name'):description('Set the debug font name used to render debug text.'):default(d.font.keys):build(),debug_font_size_slider=a.SliderBuiler():parent(c.movement):name('Debug Font Size'):description('Set the debug font size used to render debug text.'):default(d.font.size):min(1):max(64):step(1):build(),debug_font_weight_slider=a.SliderBuiler():parent(c.movement):name('Debug Font Weight'):description('Set the debug font weight used to render debug text.'):default(d.font.weight):min(100):max(900):step(100):build(),debug_shadow_check=a.CheckBuilder():parent(c.movement):name('Debug Shadow'):description('Override the global shadow parameters.'):build(),debug_shadow_offset_x_slider=a.SliderBuiler():parent(c.movement):name('Debug Shadow Offset X-Axis'):description('Set the debug shadow offset on the x-axis.'):default(d.shadow.offset.x):min(-2):max(2):step(1):build(),debug_shadow_offset_y_slider=a.SliderBuiler():parent(c.movement):name('Debug Shadow Offset Y-Axis'):description('Set the debug shadow offset on the y-axis.'):default(d.shadow.offset.y):min(-2):max(2):step(1):build(),debug_shadow_color=a.ColorBuilder():parent(c.movement):name('Debug Shadow Color'):default(d.color.shadow):build(),debug_shadow_saturation_slider=a.SliderBuiler():parent(c.movement):name('Debug Shadow Color Saturation'):description('Set the debug shadow color saturation.'):default(d.color.saturation):min(0):max(1):step(0.01):build(),debug_shadow_brightness_slider=a.SliderBuiler():parent(c.movement):name('Debug Shadow Color Brightness'):description('Set the debug shadow color brightness.'):default(d.color.brightness):min(0):max(1):step(0.01):build()}local f={player='CCSPlayer'}local g={otrg='m_hObserverTarget'}local h={move='CreateMove',pre_move='PreMove',draw='Draw',unload='Unload'}local i={lcl=nil,plr=nil,trg=nil}local j={}local k={screen={w=nil,h=nil},spectators=nil}callbacks.Register(h.move,function(l)i.lcl=entities.GetLocalPlayer()if i.lcl then if i.lcl:IsAlive()then i.plr=i.lcl;i.trg=nil else i.trg=i.lcl:GetPropEntity(g.otrg)i.plr=i.trg end else i.plr=nil;i.trg=nil end;if i.plr and i.plr:IsAlive()then do k.spectators={}for n,o in pairs(entities.FindByClass(f.player))do local p=false;repeat if o:IsAlive()then p=true;break end;if not e.debug_spectators_self_check:GetValue()then if o:GetIndex()==i.lcl:GetIndex()then p=true;break end end;local q=o:GetPropEntity(g.otrg)if not q then p=true;break end;if q:GetIndex()~=i.plr:GetIndex()then p=true;break end;if not e.debug_spectators_bot_check:GetValue()then local s=client.GetPlayerInfo(o:GetIndex())if s.IsBot or s.IsGOTV then p=true;break end end;local r=k.spectators;r[#r+1]=o;p=true until true;if not p then break end end end end end)callbacks.Register(h.draw,function()k.screen.w,k.screen.h=draw.GetScreenSize()if not k.screen.w or not k.screen.h then return end;if e.debug_check:GetValue()then local l,n,o=nil,nil,nil;if e.debug_font_check:GetValue()then l=d.font.keys[e.debug_font_name_combo:GetValue()+1]n=e.debug_font_size_slider:GetValue()o=e.debug_font_weight_slider:GetValue()elseif e.global_font_check:GetValue()then l=d.font.keys[e.global_font_name_combo:GetValue()+1]n=e.global_font_size_slider:GetValue()o=e.global_font_weight_slider:GetValue()else return end;if not l or not n or not o then return end;local p=m.fnext(j,l,n,o)if not p then return end;local q,r,s,t,u=nil,nil,nil,nil,nil;if e.debug_shadow_check:GetValue()then q={e.debug_shadow_color:GetValue()}r=e.debug_shadow_offset_x_slider:GetValue()s=e.debug_shadow_offset_y_slider:GetValue()t=e.debug_shadow_saturation_slider:GetValue()u=e.debug_shadow_brightness_slider:GetValue()elseif e.global_shadow_check:GetValue()then q={e.global_shadow_color:GetValue()}r=e.global_shadow_offset_x_slider:GetValue()s=e.global_shadow_offset_y_slider:GetValue()t=e.global_shadow_saturation_slider:GetValue()u=e.global_shadow_brightness_slider:GetValue()end;if q~=nil and t~=nil and u~=nil then local y,z,A,B=m.rgb2hsb(unpack(q))q={m.hsb2rgb(y,z*t,A*u,B)}end;draw.SetFont(p)local v={e.debug_color:GetValue()}local w=e.debug_saturation_slider:GetValue()local x=e.debug_brightness_slider:GetValue()do local y,z,A,B=m.rgb2hsb(unpack(v))v={m.hsb2rgb(y,z*w,A*x,B)}end;if e.debug_spectators_check:GetValue()then local y,z=draw.GetTextSize(' ')local A,B=y,z;for C,D in ipairs(k.spectators)do local E=D:GetName()draw.Color(unpack(q))draw.Text(A+r,B+s,E)draw.Color(unpack(v))draw.Text(A,B,E)local F,G=draw.GetTextSize(E)B=B+ (G+z)end end end end)