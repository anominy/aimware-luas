local q={fnext=function(p,r,s,t)if p==nil then return nil end;r=tostring(r)s=tostring(s)t=tostring(t)if p[r]==nil then p[r]={}end;if p[r][s]==nil then p[r][s]={}end;if p[r][s][t]==nil then p[r][s][t]=draw.CreateFont(r,(tonumber(s)),tonumber(t))end;return p[r][s][t]end,rgb2hsb=function(p,r,s,t)if p then p=p/255 else p=0 end;if r then r=r/255 else r=0 end;if s then s=s/255 else s=0 end;if t then t=t/255 else t=0 end;p=math.max(0,math.min(1,p))r=math.max(0,math.min(1,r))s=math.max(0,math.min(1,s))t=math.max(0,math.min(1,t))local u=math.min(p,r,s)local v=math.max(p,r,s)local w=v;local x;if v~=0 then x=(v-u)/v else x=0 end;local y=0;if v~=u then if v==p then y=(r-s)/ (v-u)elseif v==r then y=2+ (s-p)/ (v-u)else y=4+ (p-r)/ (v-u)end end;y=y/6;if y<0 then y=y+1 elseif y>1 then y=y-1 end;return y,x,w,t end,hsb2rgb=function(p,r,s,t)if p then p=p else p=0 end;if r then r=r else r=0 end;if s then s=s else s=0 end;if t then t=t else t=1 end;p=math.max(0,math.min(1,p))r=math.max(0,math.min(1,r))s=math.max(0,math.min(1,s))t=math.max(0,math.min(1,t))local u=p*360;if r==0 then local D=math.floor(s*255+0.5)return D,D,D,math.floor(t*255+0.5)end;local v=math.floor(u/60)local w=(u/60)-v;local x=s* (1-r)local y=s* (1-r*w)local z=s* (1-r* (1-w))local A=0;local B=0;local C=0;if v==0 then A,B,C=s,z,x elseif v==1 then A,B,C=y,s,x elseif v==2 then A,B,C=x,s,z elseif v==3 then A,B,C=x,y,s elseif v==4 then A,B,C=z,x,s else A,B,C=s,x,y end;return(math.floor(A*255+0.5)), (math.floor(B*255+0.5)), (math.floor(C*255+0.5)),math.floor(t*255+0.5)end,vlen3=function(p,r,s)p=tonumber(p)r=tonumber(r)s=tonumber(s)return math.sqrt(p^2+r^2+s^2)end}local a={BaseBuilder=(function()do local p;local r={parent=function(s,t)s._parent=t;return s end,name=function(s,t)s._name=t;return s end,varname=function(s,t)s._varname=t;return s end,description=function(s,t)s._description=t;return s end,default=function(s,t)s._default=t;return s end,__tostring=function(s)return s._varname..'("'..s._name..'")'end}if r.__index==nil then r.__index=r end;p=setmetatable({__init=function(s)s._parent=nil;s._name=nil;s._varname=nil;s._description=nil;s._default=nil end,__base=r},{__index=r,__call=function(s,...)local t=setmetatable({},r)s.__init(t,...)return t end})r.__class=p;return p end end)()}do local p;local r=a.BaseBuilder;local s={build=function(t)if(t._name==nil or# (t._name:gsub('%s+',''))==0)then error('Name cannot be blank for a checkbox')end;if(t._varname==nil or# (t._varname:gsub('%s+',''))==0)then t._varname=(t._name:gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower())..'.checkbox'end;local u=gui.Checkbox(t._parent,t._varname,t._name,t._default)if not(t._description==nil or# (t._description:gsub('%s+',''))==0)then u:SetDescription(t._description)end;return u end}for t,u in pairs(r.__base)do if s[t]==nil and t:match("^__")and not(t=="__index"and u==r.__base)then s[t]=u end end;if s.__index==nil then s.__index=s end;setmetatable(s,r.__base)p=setmetatable({__init=function(t)t._default=false end,__base=s,__parent=r},{__index=function(t,u)local v=rawget(s,u)if v==nil then local w=rawget(t,"__parent")if w then return w[u]end else return v end end,__call=function(t,...)local u=setmetatable({},s)t.__init(u,...)return u end})s.__class=p;if r.__inherited then r.__inherited(r,p)end;a.CheckBuilder=p end;do local p;local r=a.BaseBuilder;local s={build=function(t)if(t._name==nil or# (t._name:gsub('%s+',''))==0)then error('Name cannot be blank for a color picker')end;if not(t._description==nil or# (t._description:gsub('%s+',''))==0)then error('Description is disallowed for a color picker')end;if(t._default==nil or# (t._default)==0)then error('Default value cannot be empty for a color picker')end;if(t._varname==nil or# (t._varname:gsub('%s+',''))==0)then t._varname=(t._name:gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower())..'.colorpicker'end;return gui.ColorPicker(t._parent,t._varname,t._name,unpack(t._default))end}for t,u in pairs(r.__base)do if s[t]==nil and t:match("^__")and not(t=="__index"and u==r.__base)then s[t]=u end end;if s.__index==nil then s.__index=s end;setmetatable(s,r.__base)p=setmetatable({__init=function(t,...)return p.__parent.__init(t,...)end,__base=s,__parent=r},{__index=function(t,u)local v=rawget(s,u)if v==nil then local w=rawget(t,"__parent")if w then return w[u]end else return v end end,__call=function(t,...)local u=setmetatable({},s)t.__init(u,...)return u end})s.__class=p;if r.__inherited then r.__inherited(r,p)end;a.ColorBuilder=p end;do local p;local r=a.BaseBuilder;local s={build=function(t)if(t._name==nil or# (t._name:gsub('%s+',''))==0)then error('Name cannot be blank for an editbox')end;if(t._varname==nil or# (t._varname:gsub('%s+',''))==0)then t._varname=(t._name:gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower())..'.editbox'end;local u=gui.Editbox(t._parent,t._varname,t._name)if not(t._description==nil or# (t._description:gsub('%s+',''))==0)then u:SetDescription(t._description)end;return u end}for t,u in pairs(r.__base)do if s[t]==nil and t:match("^__")and not(t=="__index"and u==r.__base)then s[t]=u end end;if s.__index==nil then s.__index=s end;setmetatable(s,r.__base)p=setmetatable({__init=function(t,...)return p.__parent.__init(t,...)end,__base=s,__parent=r},{__index=function(t,u)local v=rawget(s,u)if v==nil then local w=rawget(t,"__parent")if w then return w[u]end else return v end end,__call=function(t,...)local u=setmetatable({},s)t.__init(u,...)return u end})s.__class=p;if r.__inherited then r.__inherited(r,p)end;a.EditBuilder=p end;do local p;local r=a.BaseBuilder;local s={build=function(t)if(t._name==nil or# (t._name:gsub('%s+',''))==0)then error('Name cannot be blank for a combobox')end;if(t._default==nil or# (t._default)==0)then error('Default value cannot be empty for a combobox')end;if(t._varname==nil or# (t._varname:gsub('%s+',''))==0)then t._varname=(t._name:gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower())..'.combobox'end;local u=gui.Combobox(t._parent,t._varname,t._name,unpack(t._default))if not(t._description==nil or# (t._description:gsub('%s+',''))==0)then u:SetDescription(t._description)end;return u end}for t,u in pairs(r.__base)do if s[t]==nil and t:match("^__")and not(t=="__index"and u==r.__base)then s[t]=u end end;if s.__index==nil then s.__index=s end;setmetatable(s,r.__base)p=setmetatable({__init=function(t,...)return p.__parent.__init(t,...)end,__base=s,__parent=r},{__index=function(t,u)local v=rawget(s,u)if v==nil then local w=rawget(t,"__parent")if w then return w[u]end else return v end end,__call=function(t,...)local u=setmetatable({},s)t.__init(u,...)return u end})s.__class=p;if r.__inherited then r.__inherited(r,p)end;a.ComboBuilder=p end;do local p;local r=a.BaseBuilder;local s={min=function(t,u)t._min=u;return t end,max=function(t,u)t._max=u;return t end,step=function(t,u)t._step=u;return t end,build=function(t)if(t._name==nil or# (t._name:gsub('%s+',''))==0)then error('Name cannot be blank for a slider')end;if t._default==nil then error('Default value cannot be nil for a slider')end;if t._min==nil then error('Minimum value cannot be nil for a slider')end;if t._max==nil then error('Maximum value cannot be nil for a slider')end;if t._step==nil then error('Step cannot be nil for a slider')end;if t._min>=t._max then error('Minimum value should be less than the maximum value for a slider')end;if(t._varname==nil or# (t._varname:gsub('%s+',''))==0)then t._varname=(t._name:gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower())..'.slider'end;local u=gui.Slider(t._parent,t._varname,t._name,t._default,t._min,t._max,t._step)if not(t._description==nil or# (t._description:gsub('%s+',''))==0)then u:SetDescription(t._description)end;return u end}for t,u in pairs(r.__base)do if s[t]==nil and t:match("^__")and not(t=="__index"and u==r.__base)then s[t]=u end end;if s.__index==nil then s.__index=s end;setmetatable(s,r.__base)p=setmetatable({__init=function(t)t._min=nil;t._max=nil;t._step=nil end,__base=s,__parent=r},{__index=function(t,u)local v=rawget(s,u)if v==nil then local w=rawget(t,"__parent")if w then return w[u]end else return v end end,__call=function(t,...)local u=setmetatable({},s)t.__init(u,...)return u end})s.__class=p;if r.__inherited then r.__inherited(r,p)end;a.SliderBuilder=p end;do local p;local r=a.BaseBuilder;local s={build=function(t)if t._parent==nil then error('Parent cannot be nil for a tab')end;if(t._name==nil or# (t._name:gsub('%s+',''))==0)then error('Name cannot be blank for a tab')end;if(t._varname==nil or# (t._varname:gsub('%s+',''))==0)then t._varname=((tostring(t._parent))..' '..t._name):gsub('%s+','.'):gsub('-+','.'):gsub('%.%+','.'):lower()end;return gui.Tab(t._parent,t._varname,t._name)end}for t,u in pairs(r.__base)do if s[t]==nil and t:match("^__")and not(t=="__index"and u==r.__base)then s[t]=u end end;if s.__index==nil then s.__index=s end;setmetatable(s,r.__base)p=setmetatable({__init=function(t,...)return p.__parent.__init(t,...)end,__base=s,__parent=r},{__index=function(t,u)local v=rawget(s,u)if v==nil then local w=rawget(t,"__parent")if w then return w[u]end else return v end end,__call=function(t,...)local u=setmetatable({},s)t.__init(u,...)return u end})s.__class=p;if r.__inherited then r.__inherited(r,p)end;a.TabBuilder=p end;local b={menu=gui.Reference('Menu'),settings=gui.Reference('Settings')}local c={movement=a.TabBuilder():parent(b.settings):name('Movement'):build()}local d={font={keys={'Consolas','AcPlus IBM BIOS'},vals={},size={min=1,max=64,step=1,default=20},weight={min=100,max=900,step=100,default=900}},shadow={offset={x=1,y=1,min=-2,max=2,step=1}},color={debug={0,255,0,255},shadow={0,0,0,255},speed={0,255,0,255},saturation={min=0,max=1,step=0.01,default=1},brightness={min=0,max=1,step=0.01,default=1}}}local e={global_font_check=a.CheckBuilder():parent(c.movement):name('Global Font'):description('Render any supported text using the global font.'):default(true):build(),global_font_name_combo=a.ComboBuilder():parent(c.movement):name('Global Font Name'):description('Set the global font name used to render any text.'):default(d.font.keys):build(),global_font_size_slider=a.SliderBuilder():parent(c.movement):name('Global Font Size'):description('Set the global font size used to render any text.'):default(d.font.size.default):min(d.font.size.min):max(d.font.size.max):step(d.font.size.step):build(),global_font_weight_slider=a.SliderBuilder():parent(c.movement):name('Global Font Weight'):description('Set the global font weight used to render any text.'):default(d.font.weight.default):min(d.font.weight.min):max(d.font.weight.max):step(d.font.weight.step):build(),global_shadow_check=a.CheckBuilder():parent(c.movement):name('Global Shadow'):description('Render shadows of all elements that are supported. '):default(true):build(),global_shadow_offset_x_slider=a.SliderBuilder():parent(c.movement):name('Global Shadow Offset X-Axis'):description('Set the global shadow offset on the x-axis.'):default(d.shadow.offset.x):min(d.shadow.offset.min):max(d.shadow.offset.max):step(d.shadow.offset.step):build(),global_shadow_offset_y_slider=a.SliderBuilder():parent(c.movement):name('Global Shadow Offset Y-Axis'):description('Set the global shadow offset on the y-axis.'):default(d.shadow.offset.y):min(d.shadow.offset.min):max(d.shadow.offset.max):step(d.shadow.offset.step):build(),global_shadow_color=a.ColorBuilder():parent(c.movement):name('Global Shadow Color'):default(d.color.shadow):build(),global_shadow_saturation_slider=a.SliderBuilder():parent(c.movement):name('Global Shadow Color Saturation'):description('Set the global shadow color saturation.'):default(d.color.saturation.default):min(d.color.saturation.min):max(d.color.saturation.max):step(d.color.saturation.step):build(),global_shadow_brightness_slider=a.SliderBuilder():parent(c.movement):name('Global Shadow Color Brightness'):description('Set the global shadow color brightness.'):default(d.color.brightness.default):min(d.color.brightness.min):max(d.color.brightness.max):step(d.color.brightness.step):build(),debug_check=a.CheckBuilder():parent(c.movement):name('Debug'):description('Show debug text on the screen.'):build(),debug_spectators_check=a.CheckBuilder():parent(c.movement):name('Debug Spectators'):description('Show the list of spectators in the top-left corner of the screen.'):build(),debug_spectators_bot_check=a.CheckBuilder():parent(c.movement):name('Debug Spectators Bot'):description('Switch to show or hide bots from the list of spectators.'):build(),debug_spectators_self_check=a.CheckBuilder():parent(c.movement):name('Debug Spectators Self'):description('Switch to show or hide yourself from the list of spectators.'):build(),debug_jt_check=a.CheckBuilder():parent(c.movement):name('Debug Jump Type'):description('Show debug text on the top-right corner of the screen with current jump type.'):build(),debug_color=a.ColorBuilder():parent(c.movement):name('Debug Color'):default(d.color.debug):build(),debug_saturation_slider=a.SliderBuilder():parent(c.movement):name('Debug Color Saturation'):description('Set the debug color saturation.'):default(d.color.saturation.default):min(d.color.saturation.min):max(d.color.saturation.max):step(d.color.saturation.step):build(),debug_brightness_slider=a.SliderBuilder():parent(c.movement):name('Debug Color Brightness'):description('Set the debug color brightness.'):default(d.color.brightness.default):min(d.color.brightness.min):max(d.color.brightness.max):step(d.color.brightness.step):build(),debug_font_check=a.CheckBuilder():parent(c.movement):name('Debug Font'):description('Override the global font parameters.'):build(),debug_font_name_combo=a.ComboBuilder():parent(c.movement):name('Debug Font Name'):description('Set the debug font name used to render debug text.'):default(d.font.keys):build(),debug_font_size_slider=a.SliderBuilder():parent(c.movement):name('Debug Font Size'):description('Set the debug font size used to render debug text.'):default(d.font.size.default):min(d.font.size.min):max(d.font.size.max):step(d.font.size.step):build(),debug_font_weight_slider=a.SliderBuilder():parent(c.movement):name('Debug Font Weight'):description('Set the debug font weight used to render debug text.'):default(d.font.weight.default):min(d.font.weight.min):max(d.font.weight.max):step(d.font.weight.step):build(),debug_shadow_check=a.CheckBuilder():parent(c.movement):name('Debug Shadow'):description('Override the global shadow parameters.'):build(),debug_shadow_offset_x_slider=a.SliderBuilder():parent(c.movement):name('Debug Shadow Offset X-Axis'):description('Set the debug shadow offset on the x-axis.'):default(d.shadow.offset.x):min(d.shadow.offset.min):max(d.shadow.offset.max):step(d.shadow.offset.step):build(),debug_shadow_offset_y_slider=a.SliderBuilder():parent(c.movement):name('Debug Shadow Offset Y-Axis'):description('Set the debug shadow offset on the y-axis.'):default(d.shadow.offset.y):min(d.shadow.offset.min):max(d.shadow.offset.max):step(d.shadow.offset.step):build(),debug_shadow_color=a.ColorBuilder():parent(c.movement):name('Debug Shadow Color'):default(d.color.shadow):build(),debug_shadow_saturation_slider=a.SliderBuilder():parent(c.movement):name('Debug Shadow Color Saturation'):description('Set the debug shadow color saturation.'):default(d.color.saturation.default):min(d.color.saturation.min):max(d.color.saturation.max):step(d.color.saturation.step):build(),debug_shadow_brightness_slider=a.SliderBuilder():parent(c.movement):name('Debug Shadow Color Brightness'):description('Set the debug shadow color brightness.'):default(d.color.brightness.default):min(d.color.brightness.min):max(d.color.brightness.max):step(d.color.brightness.step):build(),speed_check=a.CheckBuilder():parent(c.movement):name('Speed'):description('Show player\'s speed on the screen.'):build(),speed_hide_check=a.CheckBuilder():parent(c.movement):name('Speed Hide'):description('Hide player\'s speed while scoping.'):build(),speed_ladder_check=a.CheckBuilder():parent(c.movement):name('Speed Ladder'):description('Show player\'s vertical speed while ladder moving.'):build(),speed_color=a.ColorBuilder():parent(c.movement):name('Speed Color'):default(d.color.speed):build(),speed_saturation_slider=a.SliderBuilder():parent(c.movement):name('Speed Color Saturation'):description('Set the speed color saturation.'):default(d.color.saturation.default):min(d.color.saturation.min):max(d.color.saturation.max):step(d.color.saturation.step):build(),speed_brightness_slider=a.SliderBuilder():parent(c.movement):name('Speed Color Brightness'):description('Set the speed color brightness.'):default(d.color.brightness.default):min(d.color.brightness.min):max(d.color.brightness.max):step(d.color.brightness.step):build(),speed_font_check=a.CheckBuilder():parent(c.movement):name('Speed Font'):description('Override the global font parameters.'):build(),speed_font_name_combo=a.ComboBuilder():parent(c.movement):name('Speed Font Name'):description('Set the speed font name used to render speed text.'):default(d.font.keys):build(),speed_font_size_slider=a.SliderBuilder():parent(c.movement):name('Speed Font Size'):description('Set the speed font size used to render speed text.'):default(d.font.size.default):min(d.font.size.min):max(d.font.size.max):step(d.font.size.step):build(),speed_font_weight_slider=a.SliderBuilder():parent(c.movement):name('Speed Font Weight'):description('Set the speed font weight used to render speed text.'):default(d.font.weight.default):min(d.font.weight.min):max(d.font.weight.max):step(d.font.weight.step):build(),speed_shadow_check=a.CheckBuilder():parent(c.movement):name('Speed Shadow'):description('Override the global shadow parameters.'):build(),speed_shadow_offset_x_slider=a.SliderBuilder():parent(c.movement):name('Speed Shadow Offset X-Axis'):description('Set the speed shadow offset on the x-axis.'):default(d.shadow.offset.x):min(d.shadow.offset.min):max(d.shadow.offset.max):step(d.shadow.offset.step):build(),speed_shadow_offset_y_slider=a.SliderBuilder():parent(c.movement):name('Speed Shadow Offset Y-Axis'):description('Set the speed shadow offset on the y-axis.'):default(d.shadow.offset.y):min(d.shadow.offset.min):max(d.shadow.offset.max):step(d.shadow.offset.step):build(),speed_shadow_color=a.ColorBuilder():parent(c.movement):name('Speed Shadow Color'):default(d.color.shadow):build(),speed_shadow_saturation_slider=a.SliderBuilder():parent(c.movement):name('Speed Shadow Color Saturation'):description('Set the speed shadow color saturation.'):default(d.color.saturation.default):min(d.color.saturation.min):max(d.color.saturation.max):step(d.color.saturation.step):build(),speed_shadow_brightness_slider=a.SliderBuilder():parent(c.movement):name('Speed Shadow Color Brightness'):description('Set the speed shadow color brightness.'):default(d.color.brightness.default):min(d.color.brightness.min):max(d.color.brightness.max):step(d.color.brightness.step):build()}local f={player='CCSPlayer'}local g={otrg='m_hObserverTarget',scope='m_bIsScoped',flags='m_fFlags',rmode='m_nRenderMode',velx='m_vecVelocity[0]',vely='m_vecVelocity[1]',velz='m_vecVelocity[2]'}local h={move='CreateMove',pre_move='PreMove',draw='Draw',unload='Unload'}local i={lcl=nil,plr=nil,trg=nil}local j={}local k={lcllad=2304,trglad=2314}local l={on_ground=1,ducking=2,water_jump=8,in_water=1024,swim=4096}local m={in_jump=2,in_duck=4}local n={none=0,jump=1,perfect=2,jb=3,laj=4,lag=5,lah=6}n[n.none]='None'n[n.jump]='Jump'n[n.perfect]='Perfect'n[n.jb]='Jump-Bug'n[n.laj]='Ladder Jump'n[n.lag]='Ladder Glide'n[n.lah]='Ladder Hop'local o={screen={w=nil,h=nil},specs=nil,scope=nil,jt=n.none,cvel=nil,pvel=nil,ppvel=nil,cground=0,pground=0,cduck=0,pduck=0,cladder=0,pladder=0,clag=0,plag=0,pre_flags=nil,pre_duck=nil,pre_ground=nil}callbacks.Register(h.move,function(p)i.lcl=entities.GetLocalPlayer()if i.lcl then if i.lcl:IsAlive()then i.plr=i.lcl;i.trg=nil else i.trg=i.lcl:GetPropEntity(g.otrg)i.plr=i.trg end else i.plr=nil;i.trg=nil end;if i.plr and i.plr:IsAlive()then do o.specs={}for r,s in pairs(entities.FindByClass(f.player))do local t=false;repeat if s:IsAlive()then t=true;break end;if not e.debug_spectators_self_check:GetValue()then if s:GetIndex()==i.lcl:GetIndex()then t=true;break end end;local u=s:GetPropEntity(g.otrg)if not u then t=true;break end;if u:GetIndex()~=i.plr:GetIndex()then t=true;break end;if not e.debug_spectators_bot_check:GetValue()then local w=client.GetPlayerInfo(s:GetIndex())if w.IsBot or w.IsGOTV then t=true;break end end;local v=o.specs;v[#v+1]=s;t=true until true;if not t then break end end end;do local r=i.plr:GetPropInt(g.flags)o.pground=o.cground;if r then if(bit.band(r,l.on_ground))==l.on_ground then if o.cground<0 then o.cground=0 end;o.cground=o.cground+1 else if o.cground>0 then o.cground=0 end;o.cground=o.cground-1 end else o.cground=0 end end;do local r=i.plr:GetPropInt(g.flags)o.pduck=o.cduck;if r then if(bit.band(r,l.ducking))==l.ducking then if o.cduck<0 then o.cduck=0 end;o.cduck=o.cduck+1 else if o.cduck>0 then o.cduck=0 end;o.cduck=o.cduck-1 end else o.cdcuk=0 end end;do local r=i.plr:GetPropInt(g.rmode)o.pladder=o.cladder;if r then if r==k.lcllad or r==k.trglad then if o.cladder<0 then o.cladder=0 end;o.cladder=o.cladder+1 else if o.cladder>0 then o.cladder=0 end;o.cladder=o.cladder-1 end else o.cladder=0 end end;do o.ppvel=o.pvel;o.pvel=o.cvel;local r=i.plr:GetPropFloat('localdata',g.velx)local s=i.plr:GetPropFloat('localdata',g.vely)local t=i.plr:GetPropFloat('localdata',g.velz)if not r and not s and not t then o.cvel=nil else if not r then r=0 end;if not s then s=0 end;if not t then t=0 end;o.cvel={r,s,t}end end;do o.scope=i.plr:GetPropBool(g.scope)end else o.specs={}o.cground=0;o.pground=0;o.cduck=0;o.pduck=0;o.cladder=0;o.pladder=0;o.cvel=nil;o.pvel=nil;o.ppvel=nil;o.scope=false end;if i.lcl and i.lcl:IsAlive()then o.plag=o.clag;if o.cladder~=0 then if o.cladder>0 and(bit.band(p.buttons,m.in_jump))==m.in_jump then if o.clag<0 then o.clag=0 end;o.clag=o.clag+1 else if o.clag>0 then o.clag=0 end;o.clag=o.clag-1 end else o.clag=0 end else o.clag=0;o.plag=0 end;if i.plr and i.plr:IsAlive()then local r=i.plr:GetPropInt(g.flags)local s=r and((bit.band(r,l.water_jump))==l.water_jump or(bit.band(r,l.swim))==l.swim or(bit.band(r,l.in_water))==l.in_water)local t=o.cladder>0 and s;local u=o.cladder<0 and o.pladder>0;local v=o.clag<0 and o.plag>0;local w=u and o.cground==-1 and o.pground>0;local x=o.pre_duck and o.cduck<0 and o.cground<0 and((o.pvel and o.pvel[3]<0)or(o.pvel and o.pvel[3]==0 and o.ppvel and o.ppvel[3]<0))and o.cvel and o.cvel[3]>0 and not t;if o.cground>1 or s then o.jt=n.none elseif w then o.jt=n.lah elseif v then o.jt=n.lag elseif u then o.jt=n.laj elseif x then o.jt=n.jb elseif o.cground==-1 and o.cladder<0 then if o.pground==1 or(o.pground==2 or o.pground==3)and o.pduck==1 and o.cduck==2 and o.pre_duck and o.pre_ground then o.jt=n.perfect else o.jt=n.jump end end else o.jt=n.none end end)callbacks.Register(h.pre_move,function(p)if i.plr and i.plr:IsAlive()then o.pre_flags=i.plr:GetPropInt(g.flags)o.pre_duck=(bit.band(o.pre_flags,l.ducking))==l.ducking;o.pre_ground=(bit.band(o.pre_flags,l.on_ground))==l.on_ground else o.pre_flags=nil;o.pre_duck=nil;o.pre_ground=nil end end)callbacks.Register(h.draw,function()o.screen.w,o.screen.h=draw.GetScreenSize()if not o.screen.w or not o.screen.h then return end;if e.debug_check:GetValue()then local p,r,s=nil,nil,nil;if e.debug_font_check:GetValue()then p=d.font.keys[e.debug_font_name_combo:GetValue()+1]r=e.debug_font_size_slider:GetValue()s=e.debug_font_weight_slider:GetValue()elseif e.global_font_check:GetValue()then p=d.font.keys[e.global_font_name_combo:GetValue()+1]r=e.global_font_size_slider:GetValue()s=e.global_font_weight_slider:GetValue()end;if p and r and s then local t=q.fnext(j,p,r,s)if t then local u,v,w,x,y=nil,nil,nil,nil,nil;if e.debug_shadow_check:GetValue()then u={e.debug_shadow_color:GetValue()}v=e.debug_shadow_offset_x_slider:GetValue()w=e.debug_shadow_offset_y_slider:GetValue()x=e.debug_shadow_saturation_slider:GetValue()y=e.debug_shadow_brightness_slider:GetValue()elseif e.global_shadow_check:GetValue()then u={e.global_shadow_color:GetValue()}v=e.global_shadow_offset_x_slider:GetValue()w=e.global_shadow_offset_y_slider:GetValue()x=e.global_shadow_saturation_slider:GetValue()y=e.global_shadow_brightness_slider:GetValue()end;if u and x and y then do local C,D,E,F=q.rgb2hsb(unpack(u))u={q.hsb2rgb(C,D*x,E*y,F)}end end;draw.SetFont(t)local z={e.debug_color:GetValue()}local A=e.debug_saturation_slider:GetValue()local B=e.debug_brightness_slider:GetValue()if z and A and B then do local C,D,E,F=q.rgb2hsb(unpack(z))z={q.hsb2rgb(C,D*A,E*B,F)}end end;if e.debug_spectators_check:GetValue()then local C,D=draw.GetTextSize(' ')local E,F=C,D;for G,H in ipairs(o.specs)do local I=H:GetName()if u and v and w then draw.Color(unpack(u))draw.Text(E+v,F+w,I)end;draw.Color(unpack(z))draw.Text(E,F,I)local J,K=draw.GetTextSize(I)F=F+ (K+D)end end;if e.debug_jt_check:GetValue()then local C,D=draw.GetTextSize(' ')local E=n[o.jt]local F,G=draw.GetTextSize(E)local H,I=o.screen.w-F-C,D;if u and v and w then draw.Color(unpack(u))draw.Text(H+v,I+w,E)end;draw.Color(unpack(z))draw.Text(H,I,E)end end end end;if e.speed_check:GetValue()and(not e.speed_hide_check:GetValue()or not o.scope)then local p,r,s=nil,nil,nil;if e.speed_font_check:GetValue()then p=d.font.keys[e.speed_font_name_combo:GetValue()+1]r=e.speed_font_size_slider:GetValue()s=e.speed_font_weight_slider:GetValue()elseif e.global_font_check:GetValue()then p=d.font.keys[e.global_font_name_combo:GetValue()+1]r=e.global_font_size_slider:GetValue()s=e.global_font_weight_slider:GetValue()end;if p and r and s then local t=q.fnext(j,p,r,s)if t then local u,v,w,A,B=nil,nil,nil,nil,nil;if e.speed_shadow_check:GetValue()then u={e.speed_shadow_color:GetValue()}v=e.speed_shadow_offset_x_slider:GetValue()w=e.speed_shadow_offset_y_slider:GetValue()A=e.speed_shadow_saturation_slider:GetValue()B=e.speed_shadow_brightness_slider:GetValue()elseif e.global_shadow_check:GetValue()then u={e.global_shadow_color:GetValue()}v=e.global_shadow_offset_x_slider:GetValue()w=e.global_shadow_offset_y_slider:GetValue()A=e.global_shadow_saturation_slider:GetValue()B=e.global_shadow_brightness_slider:GetValue()end;if u and A and B then do local K,L,M,N=q.rgb2hsb(unpack(u))u={q.hsb2rgb(K,L*A,M*B,N)}end end;draw.SetFont(t)local C={e.speed_color:GetValue()}local D=e.speed_saturation_slider:GetValue()local E=e.speed_brightness_slider:GetValue()if C and D and E then do local K,L,M,N=q.rgb2hsb(unpack(C))C={q.hsb2rgb(K,L*D,M*E,N)}end end;local F,x,y=nil,nil,nil;if e.speed_ladder_check:GetValue()and o.cladder>0 then F,x,y=0,0,o.cvel[3]else F,x,y=o.cvel[1],o.cvel[2],0 end;local z=string.format('%.0f',q.vlen3(F,x,y))local G,H=draw.GetTextSize(z)local I,J=(o.screen.w-G)/2,o.screen.h*0.6-H/2;if u and v and w then draw.Color(unpack(u))draw.Text(I+v,J+w,z)end;draw.Color(unpack(C))return draw.Text(I,J,z)end end end end)